# LEDPreview Component

## 概要

LEDPreviewは、LEDパネルレイアウトの高度なビジュアルプレビュー機能を提供するコンポーネントです。Canvas APIを使用した高性能なレンダリングにより、大規模なパネル構成（1000枚以上）でも滑らかな操作を実現します。

## 主な機能

### インタラクティブ操作
- **ズーム**: マウスホイールまたはズームボタンで拡大・縮小
- **パン**: ドラッグ操作で表示位置を移動
- **ツールチップ**: パネルにホバーすると詳細情報を表示
- **フルスクリーン**: 全画面表示モードに対応

### 表示機能
- **パネルグリッド**: 個々のLEDパネルを視覚的に表示
- **寸法表示**: 画面全体のサイズ（mm単位）を表示
- **エッジハイライト**: 端のパネルを強調表示
- **パネル番号**: 各パネルの位置を行-列形式で表示

### パフォーマンス最適化
- Canvas APIによる高速レンダリング
- 大量パネル表示時の自動最適化
- レスポンシブデザイン対応
- モバイルタッチ操作対応

## 使用方法

### 基本的な使用

```tsx
import { LEDPreview } from '@/components/results/LEDPreview';

function MyComponent() {
  return (
    <LEDPreview
      screenWidth={4}
      screenHeight={3}
      panelWidth={500}
      panelHeight={500}
      ledPitch={2.5}
    />
  );
}
```

### Props

| プロパティ | 型 | 必須 | デフォルト | 説明 |
|-----------|-----|------|-----------|------|
| `screenWidth` | `number` | ✓ | - | 横のパネル数 |
| `screenHeight` | `number` | ✓ | - | 縦のパネル数 |
| `panelWidth` | `number` | ✓ | - | 個々のパネルの幅（mm） |
| `panelHeight` | `number` | ✓ | - | 個々のパネルの高さ（mm） |
| `ledPitch` | `number` | - | - | LEDピッチ（mm） |
| `mode` | `'compact' \| 'detailed'` | - | `'detailed'` | 表示モード |
| `className` | `string` | - | `''` | カスタムCSSクラス |

### 表示モード

#### Detailed モード (デフォルト)
- パネル番号を表示
- 寸法軸を表示
- ズーム時に詳細情報を表示
- 小〜中規模の構成（〜500パネル）に最適

#### Compact モード
- パネル番号を非表示
- シンプルな表示
- 大規模構成（500パネル以上）に最適
- パフォーマンス重視

### 使用例

#### 標準的な4x3構成

```tsx
<LEDPreview
  screenWidth={4}
  screenHeight={3}
  panelWidth={500}
  panelHeight={500}
  ledPitch={2.5}
  mode="detailed"
/>
```

#### 大規模構成（1000パネル）

```tsx
<LEDPreview
  screenWidth={50}
  screenHeight={20}
  panelWidth={500}
  panelHeight={500}
  ledPitch={4.0}
  mode="compact"
/>
```

#### ウルトラワイド構成

```tsx
<LEDPreview
  screenWidth={12}
  screenHeight={3}
  panelWidth={1000}
  panelHeight={500}
  ledPitch={3.0}
/>
```

## 操作方法

### マウス操作
- **ドラッグ**: 表示位置を移動（パン）
- **ホイール**: ズームイン/アウト
- **ホバー**: パネルの詳細情報を表示

### タッチ操作（モバイル）
- **ドラッグ**: 表示位置を移動
- **ピンチ**: ズームイン/アウト（対応予定）

### コントロールボタン
- **ズームイン (+)**: 表示を拡大
- **ズームアウト (-)**: 表示を縮小
- **リセット**: 初期表示に戻す
- **フルスクリーン**: 全画面表示モードの切り替え

## アクセシビリティ

- **ARIA ラベル**: スクリーンリーダー対応
- **キーボード操作**: ボタンはキーボードで操作可能
- **高コントラスト**: ダークモード対応
- **セマンティックHTML**: 適切な要素とロール属性

## パフォーマンス

### 最適化手法
1. Canvas APIによる直接描画
2. リクエストアニメーションフレームを使用
3. デバウンスによる再描画の最適化
4. 大量パネル時の自動モード切替

### パフォーマンス指標
- **小規模（〜100パネル）**: 60fps維持
- **中規模（100〜500パネル）**: 30-60fps
- **大規模（500〜1000パネル）**: 30fps以上
- **超大規模（1000+パネル）**: Compactモード推奨

## ブラウザ対応

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

Canvas API と ES6+ の機能を使用しているため、モダンブラウザが必要です。

## トラブルシューティング

### パフォーマンスが遅い
- `mode="compact"` を試してください
- ブラウザのハードウェアアクセラレーションを有効にしてください
- 他のブラウザタブを閉じてください

### ツールチップが表示されない
- マウスがパネル上にあることを確認してください
- ズームレベルを調整してください

### フルスクリーンが機能しない
- ブラウザのフルスクリーン権限を確認してください
- HTTPSでアクセスしてください（一部ブラウザで必要）

## 今後の改善予定

- [ ] ピンチズーム対応（モバイル）
- [ ] キーボードショートカット
- [ ] パネルの選択機能
- [ ] エクスポート機能（PNG、SVG）
- [ ] アニメーション効果
- [ ] カスタムカラーテーマ

## 関連コンポーネント

- **LEDPanelLayout**: シンプルなグリッド表示コンポーネント
- **ResultsDisplay**: 計算結果表示コンポーネント
- **CalculationResult**: 結果サマリーコンポーネント

## ライセンス

このコンポーネントはプロジェクトのライセンスに従います。
